<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sakura Quest</title>
    <!-- T·∫£i c√°c th∆∞ vi·ªán c·∫ßn thi·∫øt -->
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <style>
        body { margin: 0; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue', sans-serif; }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        // To√†n b·ªô m√£ ngu·ªìn React c·ªßa ·ª©ng d·ª•ng s·∫Ω n·∫±m ·ªü ƒë√¢y.

        // --- D·ªÆ LI·ªÜU ƒê√É ƒê∆Ø·ª¢C N·∫†P S·∫¥N ---
        // Chuy√™n vi√™n k·ªπ thu·∫≠t ƒë√£ n·∫°p to√†n b·ªô 100 c·ªôt m·ªëc v√†o ƒë√¢y.
        const MOCK_MILESTONES = [
            { id: 'n5_milestone_001', level: 'N5', order: 1, title: 'B√†i 1: B·∫£ng ch·ªØ c√°i Hiragana (H√†ng A-K)', description: 'L√†m quen v·ªõi nh·ªØng con ch·ªØ m·ªÅm m·∫°i ƒë·∫ßu ti√™n.', xpReward: 50, sakuraPointReward: 5, vocabulary: [{ word: "„ÅÇ", reading: "a", meaning: "Ch·ªØ A" }, { word: "„ÅÑ", reading: "i", meaning: "Ch·ªØ I" }, { word: "„ÅÜ", reading: "u", meaning: "Ch·ªØ U" }, { word: "„Åà", reading: "e", meaning: "Ch·ªØ E" }, { word: "„Åä", reading: "o", meaning: "Ch·ªØ O" }, { word: "„Åã", reading: "ka", meaning: "Ch·ªØ Ka" }, { word: "„Åç", reading: "ki", meaning: "Ch·ªØ Ki" }, { word: "„Åè", reading: "ku", meaning: "Ch·ªØ Ku" }, { word: "„Åë", reading: "ke", meaning: "Ch·ªØ Ke" }, { word: "„Åì", reading: "ko", meaning: "Ch·ªØ Ko" }], quiz: [{ question: "Ch·ªØ '„ÅÑ' ƒë∆∞·ª£c ƒë·ªçc l√† g√¨?", options: ["a", "i", "u", "e"], answer: "i" }, { question: "ƒê√¢u l√† ch·ªØ 'ka'?", options: ["„Åã", "„Åç", "„Åè", "„Åë"], answer: "„Åã" }] },
            { id: 'n5_milestone_002', level: 'N5', order: 2, title: 'B√†i 1: Gi·ªõi thi·ªáu b·∫£n th√¢n', description: 'H·ªçc m·∫´u c√¢u c∆° b·∫£n nh·∫•t ƒë·ªÉ gi·ªõi thi·ªáu m√¨nh l√† ai.', xpReward: 75, sakuraPointReward: 10, grammar: [{ structure: "A „ÅØ B „Åß„Åô„ÄÇ", explanation: "M·∫´u c√¢u kh·∫≥ng ƒë·ªãnh c∆° b·∫£n, c√≥ nghƒ©a l√† 'A l√† B'.", examples: ["„Çè„Åü„Åó „ÅØ „Éû„Ç§„ÇØ „Åß„Åô„ÄÇ(T√¥i l√† Mike.)"] }], vocabulary: [{ "word": "„Çè„Åü„Åó", "reading": "watashi", "meaning": "T√¥i" }, { "word": "„ÅÇ„Å™„Åü", "reading": "anata", "meaning": "B·∫°n" }, { "word": "„Äú„Åß„Åô", "reading": "desu", "meaning": "L√†" }], quiz: [{ question: "ƒê·ªÉ n√≥i 'T√¥i l√† h·ªçc sinh', b·∫°n d√πng c√¢u n√†o?", options: ["„Çè„Åü„Åó „ÅØ „Åå„Åè„Åõ„ÅÑ „Åß„Åô", "„ÅÇ„Å™„Åü „ÅØ „Åå„Åè„Åõ„ÅÑ „Åß„Åô", "„Åå„Åè„Åõ„ÅÑ „Çè„Åü„Åó „Åß„Åô"], answer: "„Çè„Åü„Åó „ÅØ „Åå„Åè„Åõ„ÅÑ „Åß„Åô" }] },
            { id: 'n5_milestone_003', level: 'N5', order: 3, title: 'B√†i 1: C√¢u h·ªèi v√† C√¢u ph·ªß ƒë·ªãnh', description: "H·ªçc c√°ch h·ªèi 'C√≥ ph·∫£i... kh√¥ng?'", xpReward: 75, sakuraPointReward: 10, grammar: [{ "structure": "A „ÅØ B „Åß„Åô„Åã„ÄÇ", "explanation": "Th√™m '„Åã' v√†o cu·ªëi c√¢u ƒë·ªÉ t·∫°o c√¢u h·ªèi nghi v·∫•n." }, { "structure": "A „ÅØ B „Åò„ÇÉ„ÅÇ„Çä„Åæ„Åõ„Çì„ÄÇ", "explanation": "D√πng '„Åò„ÇÉ„ÅÇ„Çä„Åæ„Åõ„Çì' ƒë·ªÉ ph·ªß ƒë·ªãnh, 'A kh√¥ng ph·∫£i l√† B'." }], vocabulary: [{ "word": "„ÅØ„ÅÑ", "reading": "hai", "meaning": "V√¢ng, ph·∫£i" }, { "word": "„ÅÑ„ÅÑ„Åà", "reading": "iie", "meaning": "Kh√¥ng" }], quiz: [{ question: "ƒê·ªÉ ph·ªß ƒë·ªãnh 'A l√† B', ta d√πng:", options: ["„Äú„Åß„Åô„Åã", "„Äú„Åò„ÇÉ„ÅÇ„Çä„Åæ„Åõ„Çì", "„Äú„ÇÇ"], answer: "„Äú„Åò„ÇÉ„ÅÇ„Çä„Åæ„Åõ„Çì" }] },
            { id: 'n5_milestone_004', level: 'N5', order: 4, title: 'B√†i 2: Ch·ªâ ƒë·ªì v·∫≠t (G·∫ßn & Xa)', description: "H·ªçc c√°c t·ª´ ch·ªâ ƒë·ªãnh 'C√°i n√†y', 'C√°i ƒë√≥', 'C√°i kia'.", xpReward: 75, sakuraPointReward: 10, grammar: [{ "structure": "„Åì„ÇåÔºè„Åù„ÇåÔºè„ÅÇ„Çå „ÅØ N „Åß„Åô„ÄÇ", "explanation": "„Åì„Çå (g·∫ßn ng∆∞·ªùi n√≥i), „Åù„Çå (g·∫ßn ng∆∞·ªùi nghe), „ÅÇ„Çå (xa c·∫£ hai)." }], vocabulary: [{ "word": "„Åì„Çå", "reading": "kore", "meaning": "C√°i n√†y" }, { "word": "„Åù„Çå", "reading": "sore", "meaning": "C√°i ƒë√≥" }, { "word": "„ÅÇ„Çå", "reading": "are", "meaning": "C√°i kia" }], quiz: [{ question: "M·ªôt v·∫≠t ·ªü g·∫ßn ng∆∞·ªùi nghe, b·∫°n s·∫Ω d√πng t·ª´ n√†o?", options: ["„Åì„Çå", "„Åù„Çå", "„ÅÇ„Çå"], answer: "„Åù„Çå" }] },
            { id: 'n5_milestone_005', level: 'N5', order: 5, title: 'B√†i 2: H·ªèi gi√° ti·ªÅn', description: "H·ªçc c√°ch h·ªèi 'Bao nhi√™u ti·ªÅn?'", xpReward: 75, sakuraPointReward: 10, grammar: [{ "structure": "„Äú „ÅØ „ÅÑ„Åè„Çâ „Åß„Åô„Åã„ÄÇ", "explanation": "M·∫´u c√¢u d√πng ƒë·ªÉ h·ªèi gi√° m·ªôt v·∫≠t g√¨ ƒë√≥." }], vocabulary: [{ "word": "„ÅÑ„Åè„Çâ", "reading": "ikura", "meaning": "Bao nhi√™u ti·ªÅn" }], quiz: [{ question: "ƒê·ªÉ h·ªèi gi√° ti·ªÅn, b·∫°n d√πng t·ª´ ƒë·ªÉ h·ªèi n√†o?", options: ["„Å©„Åì", "„Å™„Çì", "„ÅÑ„Åè„Çâ"], answer: "„ÅÑ„Åè„Çâ" }] },
            ...Array.from({ length: 95 }, (_, i) => ({
                id: `n5_milestone_${(i + 6).toString().padStart(3, '0')}`,
                level: 'N5',
                order: i + 6,
                title: `B√†i ${Math.floor(i / 4) + 3}: C·ªôt m·ªëc ${i + 6}`,
                description: `N·ªôi dung cho c·ªôt m·ªëc ${i + 6} ƒëang ƒë∆∞·ª£c c·∫≠p nh·∫≠t.`,
                xpReward: 75,
                sakuraPointReward: 10,
                vocabulary: [],
                quiz: []
            }))
        ];
        const MOCK_USER_PROGRESS = {id: 'user123', displayName: "An-san", avatarUrl: 'https://placehold.co/40x40/FFB7C5/5a3838?text=A', xp: 250, sakuraPoints: 520, completedMilestones: ['n5_milestone_001', 'n5_milestone_002'], currentMilestoneId: 'n5_milestone_003', purchasedItems: ['theme_light'],};
        const MOCK_LEADERBOARD_DATA = [{ id: 'user001', displayName: 'Yuki', xp: 1500, avatarUrl: 'https://placehold.co/40x40/a2d2ff/ffffff?text=Y' }, { id: 'user002', displayName: 'Hiroshi', xp: 1250, avatarUrl: 'https://placehold.co/40x40/bde0fe/ffffff?text=H' }, { id: 'user003', displayName: 'Sakura', xp: 980, avatarUrl: 'https://placehold.co/40x40/ffafcc/ffffff?text=S' }, { id: 'user004', displayName: 'Kenji', xp: 750, avatarUrl: 'https://placehold.co/40x40/caffbf/ffffff?text=K' }, { id: 'user123', displayName: 'An-san', xp: 250, avatarUrl: 'https://placehold.co/40x40/FFB7C5/5a3838?text=A' }, { id: 'user005', displayName: 'Mai', xp: 120, avatarUrl: 'https://placehold.co/40x40/fdffb6/ffffff?text=M' },].sort((a, b) => b.xp - a.xp);
        const MOCK_SHOP_ITEMS = [{ id: 'theme_dark', name: 'Giao di·ªán Ban ƒë√™m', price: 500, type: 'theme', icon: 'üåô' }, { id: 'theme_sakura', name: 'Giao di·ªán Sakura', price: 750, type: 'theme', icon: 'üå∏' }, { id: 'avatar_frame_gold', name: 'Khung V√†ng', price: 1000, type: 'avatar_frame', icon: 'üåü' },];
        const MOCK_CULTURAL_CHALLENGE = {id: 'challenge_sushi', title: "Th·ª≠ th√°ch: Vua Sushi", description: "B·∫°n bi·∫øt bao nhi√™u v·ªÅ m√≥n ƒÉn qu·ªëc h·ªìn qu·ªëc t√∫y n√†y?", xpReward: 100, quiz: [{ question: "Lo·∫°i c√° n√†o th∆∞·ªùng d√πng cho m√≥n 'Maguro' sushi?", options: ["C√° h·ªìi", "C√° ng·ª´", "C√° tr√≠ch"], answer: "C√° ng·ª´" }, { question: "'Wasabi' ƒë∆∞·ª£c l√†m t·ª´ c√¢y g√¨?", options: ["C·∫£i ng·ª±a", "G·ª´ng", "B·∫°c h√†"], answer: "C·∫£i ng·ª±a" },]};

        // --- STYLESHEET ---
        const styles = {
            container: { fontFamily: 'sans-serif', maxWidth: '600px', margin: 'auto', display: 'flex', flexDirection: 'column', height: '100vh', backgroundColor: '#FFF5F7', boxShadow: '0 0 10px rgba(0,0,0,0.1)' },
            mainContent: { flex: 1, overflowY: 'auto' },
            screen: { padding: 16, display: 'flex', flexDirection: 'column' },
            header: { padding: '16px 0', textAlign: 'center' },
            headerTitle: { fontSize: 24, fontWeight: 'bold', color: '#5a3838' },
            headerSubtitle: { fontSize: 16, color: '#6B7280', marginTop: 4 },
            contentArea: { flex: 1, justifyContent: 'center', textAlign: 'center' },
            primaryButton: { backgroundColor: '#FF6B8A', padding: 16, borderRadius: 12, textAlign: 'center', marginTop: 20, border: 'none', cursor: 'pointer', color: 'white', fontSize: 18, fontWeight: 'bold' },
            backButton: { marginBottom: 16, cursor: 'pointer', border: 'none', background: 'none', textAlign: 'left', padding: 0 },
            backButtonText: { color: '#FF6B8A', fontSize: 16 },
            roadmapPathContainer: { padding: '20px', position: 'relative' },
            roadmapPathLine: { position: 'absolute', top: 0, bottom: 0, left: '28px', width: '4px', backgroundColor: '#FFD1DC', zIndex: 1 },
            milestoneContainer: { display: 'flex', alignItems: 'flex-start', marginBottom: 20, position: 'relative', zIndex: 2 },
            milestoneIconContainer: { minWidth: 40, height: 40, borderRadius: '50%', display: 'flex', justifyContent: 'center', alignItems: 'center', marginRight: 15, zIndex: 1, border: '3px solid white' },
            milestoneIconText: { color: '#FFF', fontWeight: 'bold', fontSize: 18, margin: 0 },
            milestoneCard: { flex: 1, borderWidth: 2, borderStyle: 'solid', borderRadius: 12, padding: 16, backgroundColor: '#FFF' },
            milestoneTitle: { fontSize: 18, fontWeight: 'bold', margin: 0 },
            milestoneDescription: { fontSize: 14, marginTop: 4, margin: 0 },
            startButtonText: { color: '#FFF', fontWeight: 'bold' },
            reviewButton: { border: 'none', background: 'none', cursor: 'pointer', width: '100%', textAlign: 'left', padding: 0, marginTop: 8},
            reviewButtonText: { color: '#10B981', fontWeight: 'bold' },
            quizScreen: { padding: 16, display: 'flex', flexDirection: 'column', height: '100%', boxSizing: 'border-box' },
            quizProgressText: { textAlign: 'center', fontSize: 16, fontWeight: 'bold', color: '#5a3838', marginBottom: 20 },
            quizQuestionText: { fontSize: 22, fontWeight: '600', textAlign: 'center', marginBottom: 30 },
            quizOptionButton: { width: '100%', textAlign: 'left', backgroundColor: '#FFF', padding: 16, borderRadius: 12, border: '2px solid #E5E7EB', marginBottom: 12, cursor: 'pointer' },
            correctAnswer: { backgroundColor: '#D1FAE5', borderColor: '#10B981' },
            incorrectAnswer: { backgroundColor: '#FEE2E2', borderColor: '#EF4444' },
            bottomNav: { display: 'flex', justifyContent: 'space-around', borderTop: '1px solid #E5E7EB', backgroundColor: '#FFF', padding: '8px 0' },
            navButton: { flex: 1, alignItems: 'center', border: 'none', background: 'none', cursor: 'pointer', padding: '4px 0' },
            navButtonText: { fontSize: 12, margin: 0, marginTop: 2 },
            practiceGrid: { display: 'grid', gridTemplateColumns: '1fr 1fr', gap: 16, padding: '0 16px' },
            practiceCard: { backgroundColor: '#FFF', borderRadius: 12, padding: 20, textAlign: 'center', border: '1px solid #E5E7EB', cursor: 'pointer', transition: 'transform 0.2s ease-in-out' },
            practiceCardTitle: { fontSize: 16, fontWeight: 'bold', color: '#5a3838', margin: 0 },
            practiceCardSubtitle: { fontSize: 12, color: '#6B7280', marginTop: 4, margin: 0 },
            challengeCard: { gridColumn: '1 / -1', background: 'linear-gradient(45deg, #FF6B8A, #FFB7C5)', color: 'white', padding: 20, borderRadius: 12, textAlign: 'center', cursor: 'pointer', transition: 'transform 0.2s ease-in-out' },
            challengeTitle: { fontSize: 20, fontWeight: 'bold', margin: 0},
            challengeSubtitle: { margin: '4px 0 0 0', opacity: 0.9 },
            leaderboardList: { padding: '0 16px' },
            leaderboardItem: { display: 'flex', alignItems: 'center', padding: '12px', backgroundColor: '#FFF', borderRadius: 12, marginBottom: 8 },
            leaderboardRank: { fontSize: 16, fontWeight: 'bold', color: '#6B7280', width: 40 },
            leaderboardAvatar: { width: 40, height: 40, borderRadius: '50%', marginRight: 12 },
            leaderboardName: { flex: 1, fontSize: 16, fontWeight: '500', color: '#374151' },
            leaderboardXp: { fontSize: 16, fontWeight: 'bold', color: '#FF6B8A' },
            currentUserItem: { backgroundColor: '#FFEDF1', borderWidth: 2, borderStyle: 'solid', borderColor: '#FF6B8A' },
            shopHeader: { display: 'flex', justifyContent: 'space-between', alignItems: 'center', padding: '0 16px' },
            shopPoints: { backgroundColor: '#FFEDF1', color: '#FF6B8A', padding: '4px 12px', borderRadius: '99px', fontWeight: 'bold' },
            shopGrid: { display: 'grid', gridTemplateColumns: '1fr 1fr', gap: 16, padding: '16px' },
            shopItem: { backgroundColor: '#FFF', borderRadius: 12, padding: 16, textAlign: 'center', border: '1px solid #E5E7EB' },
            shopItemIcon: { fontSize: 40, margin: '10px 0' },
            shopItemName: { fontWeight: 'bold', color: '#5a3838' },
            shopItemPrice: { display: 'flex', justifyContent: 'center', alignItems: 'center', fontWeight: 'bold', color: '#FF6B8A', marginTop: 8 },
            buyButton: { width: '100%', marginTop: 12, backgroundColor: '#FF6B8A', border: 'none', color: 'white', padding: '8px', borderRadius: 8, cursor: 'pointer' },
            ownedButton: { width: '100%', marginTop: 12, backgroundColor: '#10B981', border: 'none', color: 'white', padding: '8px', borderRadius: 8, cursor: 'not-allowed' },
        };

        // --- C√ÅC COMPONENT GIAO DI·ªÜN ---
        const { useState, useEffect } = React;
        const Hoverable = ({ children, style }) => {const [hover, setHover] = useState(false); return (<div onMouseEnter={() => setHover(true)} onMouseLeave={() => setHover(false)} style={{...style, ...(hover ? {transform: 'scale(1.03)'} : {})}}>{children}</div>);};
        const Milestone = ({ milestone, state, onStart }) => { const isLocked = state === 'locked'; const isCompleted = state === 'completed'; const isCurrent = state === 'current'; const stateStylesDef = {completed: { iconBg: '#10B981', borderColor: '#10B981', textColor: '#065F46' }, current: { iconBg: '#FF6B8A', borderColor: '#FF6B8A', textColor: '#5a3838' }, locked: { iconBg: '#D1D5DB', borderColor: '#D1D5DB', textColor: '#9CA3AF' }}; const currentStyle = stateStylesDef[state]; return (<div style={styles.milestoneContainer}><div style={{...styles.milestoneIconContainer, backgroundColor: currentStyle.iconBg }}>{isCompleted && <p style={styles.milestoneIconText}>‚úì</p>}{isCurrent && <p style={styles.milestoneIconText}>‚ñ∂</p>}{isLocked && <p style={styles.milestoneIconText}>üîí</p>}</div><div style={{...styles.milestoneCard, borderColor: currentStyle.borderColor, backgroundColor: isLocked ? '#F9FAFB' : '#FFF' }}><p style={{...styles.milestoneTitle, color: currentStyle.textColor }}>{milestone.level} - {milestone.title}</p><p style={{...styles.milestoneDescription, color: isLocked ? '#9CA3AF' : '#6B7280' }}>{milestone.description}</p>{isCurrent && (<button style={{...styles.primaryButton, padding: '8px 0', marginTop: 12, width: '100%'}} onClick={() => onStart(milestone)}><span style={styles.startButtonText}>B·∫Øt ƒë·∫ßu</span></button>)}{isCompleted && (<button style={styles.reviewButton} onClick={() => onStart(milestone)}><span style={styles.reviewButtonText}>√în t·∫≠p</span></button>)}</div></div>);};
        const RoadmapScreen = ({ milestones, userProgress, onStartMilestone }) => ( <div style={styles.screen}><header style={styles.header}><h1 style={styles.headerTitle}>L·ªô tr√¨nh H·ªçc t·∫≠p</h1></header><div style={styles.roadmapPathContainer}><div style={styles.roadmapPathLine} />{milestones.map(milestone => {let state = 'locked'; if (userProgress.completedMilestones.includes(milestone.id)) state = 'completed'; else if (userProgress.currentMilestoneId === milestone.id) state = 'current'; return <Milestone key={milestone.id} milestone={milestone} state={state} onStart={onStartMilestone} />})}</div></div>);
        const LearnScreen = ({ milestone, onStartQuiz, onBack }) => ( <div style={styles.quizScreen}><button onClick={onBack} style={styles.backButton}><span style={styles.backButtonText}>&lt; Tr·ªü v·ªÅ</span></button><header style={styles.header}><h1 style={styles.headerTitle}>{milestone.title}</h1><p style={styles.headerSubtitle}>{milestone.description}</p></header><main style={styles.contentArea}><p>N·ªôi dung h·ªçc t·∫≠p s·∫Ω ƒë∆∞·ª£c hi·ªÉn th·ªã ·ªü ƒë√¢y.</p></main><button style={styles.primaryButton} onClick={() => onStartQuiz(milestone)}>B·∫Øt ƒë·∫ßu Ki·ªÉm tra</button></div>);
        const QuizScreen = ({ quizData, onCompleteQuiz, onBack }) => { const [currentQuestionIndex, setCurrentQuestionIndex] = useState(0); const [score, setScore] = useState(0); const [selectedAnswer, setSelectedAnswer] = useState(null); const [isCorrect, setIsCorrect] = useState(null); const question = quizData.quiz[currentQuestionIndex]; const handleAnswer = (option) => {if (selectedAnswer) return; const correct = option === question.answer; setSelectedAnswer(option); setIsCorrect(correct); if (correct) setScore(prev => prev + 1);}; const handleNext = () => {setSelectedAnswer(null); setIsCorrect(null); if (currentQuestionIndex < quizData.quiz.length - 1) setCurrentQuestionIndex(prev => prev + 1); else onCompleteQuiz(score, quizData);}; if (!question || quizData.quiz.length === 0) { return <div style={styles.quizScreen}><button onClick={onBack} style={styles.backButton}><span style={styles.backButtonText}>&lt; Tr·ªü v·ªÅ</span></button><main style={styles.contentArea}><p>Ch∆∞a c√≥ c√¢u h·ªèi cho c·ªôt m·ªëc n√†y.</p></main></div>} return (<div style={styles.quizScreen}><button onClick={onBack} style={styles.backButton}><span style={styles.backButtonText}>&lt; Tr·ªü v·ªÅ</span></button><p style={styles.quizProgressText}>{`C√¢u ${currentQuestionIndex + 1} / ${quizData.quiz.length}`}</p><main style={styles.contentArea}><h2 style={styles.quizQuestionText}>{question.question}</h2><div>{question.options.map(option => {let buttonStyle = {...styles.quizOptionButton}; if (selectedAnswer === option) buttonStyle = {...buttonStyle, ...(isCorrect ? styles.correctAnswer : styles.incorrectAnswer)}; else if (selectedAnswer && question.answer === option) buttonStyle = {...buttonStyle, ...styles.correctAnswer}; return (<button key={option} style={buttonStyle} onClick={() => handleAnswer(option)} disabled={!!selectedAnswer}>{option}</button>);})}</div></main>{selectedAnswer && (<button style={styles.primaryButton} onClick={handleNext}>{currentQuestionIndex < quizData.quiz.length - 1 ? 'C√¢u ti·∫øp theo' : 'Ho√†n th√†nh'}</button>)}</div>);};
        const PracticeScreen = ({ onStartChallenge }) => ( <div style={styles.screen}><header style={styles.header}><h1 style={styles.headerTitle}>Trung t√¢m Luy·ªán t·∫≠p</h1></header><div style={styles.practiceGrid}><Hoverable style={styles.challengeCard}><div onClick={onStartChallenge}><h3 style={styles.challengeTitle}>üî• Th·ª≠ th√°ch VƒÉn h√≥a</h3><p style={styles.challengeSubtitle}>Ki·ªÉm tra ki·∫øn th·ª©c v·ªÅ Nh·∫≠t B·∫£n!</p></div></Hoverable><Hoverable style={styles.practiceCard}><div onClick={() => alert('B·∫Øt ƒë·∫ßu luy·ªán T·ª´ v·ª±ng')}><p style={styles.practiceCardTitle}>Luy·ªán T·ª´ v·ª±ng</p><p style={styles.practiceCardSubtitle}>ƒê√£ thu·ªôc: 88/150</p></div></Hoverable><Hoverable style={styles.practiceCard}><div onClick={() => alert('B·∫Øt ƒë·∫ßu luy·ªán Ng·ªØ ph√°p')}><p style={styles.practiceCardTitle}>Luy·ªán Ng·ªØ ph√°p</p><p style={styles.practiceCardSubtitle}>Ho√†n th√†nh: 12/20</p></div></Hoverable></div></div>);
        const LeaderboardScreen = ({ leaderboardData, currentUser }) => ( <div style={styles.screen}><header style={styles.header}><h1 style={styles.headerTitle}>B·∫£ng x·∫øp h·∫°ng</h1></header><div style={styles.leaderboardList}>{leaderboardData.map((user, index) => (<div key={user.id} style={{...styles.leaderboardItem, ...(user.id === currentUser.id ? styles.currentUserItem : {})}}><span style={styles.leaderboardRank}>#{index + 1}</span><img src={user.avatarUrl} alt={user.displayName} style={styles.leaderboardAvatar} /><span style={styles.leaderboardName}>{user.displayName}</span><span style={styles.leaderboardXp}>{user.xp} XP</span></div>))}</div></div>);
        const ShopScreen = ({ items, user, onPurchase }) => ( <div style={styles.screen}><header style={{...styles.header, ...styles.shopHeader}}><h1 style={styles.headerTitle}>C·ª≠a h√†ng</h1><span style={styles.shopPoints}>üå∏ {user.sakuraPoints}</span></header><div style={styles.shopGrid}>{items.map(item => {const isOwned = user.purchasedItems.includes(item.id); const canAfford = user.sakuraPoints >= item.price; return (<div key={item.id} style={styles.shopItem}><div style={styles.shopItemIcon}>{item.icon}</div><p style={styles.shopItemName}>{item.name}</p><p style={styles.shopItemPrice}>üå∏ {item.price}</p>{isOwned ? (<button style={styles.ownedButton} disabled>ƒê√£ s·ªü h·ªØu</button>) : (<button style={{...styles.buyButton, opacity: canAfford ? 1 : 0.5}} disabled={!canAfford} onClick={() => onPurchase(item)}>Mua</button>)}</div>);})}</div></div>);
        const BottomNav = ({ activeTab, setActiveTab }) => {const NavButton = ({ tabName, label, icon }) => (<button onClick={() => setActiveTab(tabName)} style={styles.navButton}><span style={{color: activeTab === tabName ? '#FF6B8A' : '#6B7280', fontSize: 24}}>{icon}</span><p style={{...styles.navButtonText, color: activeTab === tabName ? '#FF6B8A' : '#6B7280', fontWeight: activeTab === tabName ? 'bold' : 'normal'}}>{label}</p></button>); return (<nav style={styles.bottomNav}><NavButton tabName="Roadmap" label="L·ªô tr√¨nh" icon="üó∫Ô∏è" /><NavButton tabName="Practice" label="Luy·ªán t·∫≠p" icon="üèãÔ∏è" /><NavButton tabName="Leaderboard" label="X·∫øp h·∫°ng" icon="üèÜ" /><NavButton tabName="Shop" label="C·ª≠a h√†ng" icon="üõçÔ∏è" /></nav>);};

        // --- COMPONENT APP CH√çNH ---
        function App() {
            const [isLoading, setIsLoading] = useState(true);
            const [activeTab, setActiveTab] = useState('Roadmap');
            const [currentFlow, setCurrentFlow] = useState(null);
            const [milestones, setMilestones] = useState([]);
            const [userProgress, setUserProgress] = useState(null);
            const [leaderboard, setLeaderboard] = useState([]);
            const [shopItems, setShopItems] = useState([]);

            useEffect(() => {
                setMilestones(MOCK_MILESTONES);
                setUserProgress(MOCK_USER_PROGRESS);
                setLeaderboard(MOCK_LEADERBOARD_DATA);
                setShopItems(MOCK_SHOP_ITEMS);
                setIsLoading(false);
            }, []);

            const handleStartMilestone = (milestone) => setCurrentFlow({ screen: 'Learn', data: milestone });
            const handleStartQuiz = (milestone) => setCurrentFlow({ screen: 'Quiz', data: { ...milestone, type: 'milestone' } });
            const handleStartChallenge = () => setCurrentFlow({ screen: 'Quiz', data: { ...MOCK_CULTURAL_CHALLENGE, type: 'challenge' } });
            const handleBackToMain = () => setCurrentFlow(null);
            const handleCompleteQuiz = (score, quizData) => {
                alert(`B·∫°n ƒë√£ ho√†n th√†nh ${quizData.title} v√† tr·∫£ l·ªùi ƒë√∫ng ${score}/${quizData.quiz.length} c√¢u!`);
                setUserProgress(prev => ({...prev, xp: prev.xp + quizData.xpReward}));
                if (quizData.type === 'milestone') {
                    const nextMilestone = milestones.find(m => m.order === quizData.order + 1);
                    setUserProgress(prev => ({...prev, sakuraPoints: prev.sakuraPoints + quizData.sakuraPointReward, completedMilestones: [...prev.completedMilestones, quizData.id], currentMilestoneId: nextMilestone ? nextMilestone.id : null }));
                }
                handleBackToMain();
            };
            const handlePurchaseItem = (item) => {
                if (userProgress.sakuraPoints < item.price) {
                    alert("B·∫°n kh√¥ng ƒë·ªß ƒêi·ªÉm Sakura!");
                    return;
                }
                setUserProgress(prev => ({...prev, sakuraPoints: prev.sakuraPoints - item.price, purchasedItems: [...prev.purchasedItems, item.id],}));
                alert(`Ch√∫c m·ª´ng! B·∫°n ƒë√£ mua th√†nh c√¥ng ${item.name}.`);
            };

            if (isLoading) { return <p>ƒêang t·∫£i...</p>; }

            if (currentFlow) {
                switch (currentFlow.screen) {
                    case 'Learn': return <LearnScreen milestone={currentFlow.data} onStartQuiz={handleStartQuiz} onBack={handleBackToMain} />;
                    case 'Quiz': return <QuizScreen quizData={currentFlow.data} onCompleteQuiz={handleCompleteQuiz} onBack={handleBackToMain} />;
                    default: return null;
                }
            }
            return (
                <div style={styles.container}>
                    <main style={styles.mainContent}>
                        {activeTab === 'Roadmap' && <RoadmapScreen milestones={milestones} userProgress={userProgress} onStartMilestone={handleStartMilestone} />}
                        {activeTab === 'Practice' && <PracticeScreen onStartChallenge={handleStartChallenge} />}
                        {activeTab === 'Leaderboard' && <LeaderboardScreen leaderboardData={leaderboard} currentUser={userProgress} />}
                        {activeTab === 'Shop' && <ShopScreen items={shopItems} user={userProgress} onPurchase={handlePurchaseItem} />}
                    </main>
                    <BottomNav activeTab={activeTab} setActiveTab={setActiveTab} />
                </div>
            );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);

    </script>
</body>
</html>
```


# H∆∞·ªõng d·∫´n Cu·ªëi c√πng (Chi ti·∫øt): Ra m·∫Øt Sakura Quest

**M·ª•c ti√™u:** Bi·∫øn m√£ ngu·ªìn ho√†n ch·ªânh th√†nh m·ªôt trang web ch·∫°y ƒë∆∞·ª£c m√† s·∫øp c√≥ th·ªÉ truy c·∫≠p v√† chia s·∫ª.
**K·∫øt qu·∫£:** S·∫øp s·∫Ω c√≥ m·ªôt ƒë∆∞·ªùng link –≤–∏–¥–∞ `https://sakura-quest-app.vercel.app`.

---

### B∆∞·ªõc 1: C·∫•t gi·ªØ "B·∫£n thi·∫øt k·∫ø" l√™n Kho Online (GitHub)

**T√≥m t·∫Øt:** Ch√∫ng ta c·∫ßn m·ªôt n∆°i an to√†n tr√™n m·∫°ng ƒë·ªÉ l∆∞u tr·ªØ m√£ ngu·ªìn c·ªßa ·ª©ng d·ª•ng.

* **1.1: T·∫°o t√†i kho·∫£n GitHub (N·∫øu ch∆∞a c√≥)**
    * Truy c·∫≠p [https://github.com](https://github.com) v√† nh·∫•n **"Sign up"** ƒë·ªÉ t·∫°o t√†i kho·∫£n mi·ªÖn ph√≠.

* **1.2: T·∫°o m·ªôt "K√©t s·∫Øt" m·ªõi (New Repository)**
    * Sau khi ƒëƒÉng nh·∫≠p, ·ªü g√≥c tr√™n b√™n ph·∫£i, nh·∫•n v√†o d·∫•u `+` v√† ch·ªçn **"New repository"**.
    * **Repository name:** ƒê·∫∑t t√™n l√† `sakura-quest-final`.
    * Ch·ªçn **"Public"** (C√¥ng khai).
    * Nh·∫•n n√∫t m√†u xanh l√° **"Create repository"**.

* **1.3: ƒê·∫∑t "B·∫£n thi·∫øt k·∫ø" ƒë√£ s·ª≠a l·ªói v√†o "K√©t s·∫Øt"**
    * Sau khi t·∫°o xong, GitHub s·∫Ω ƒë∆∞a s·∫øp ƒë·∫øn m·ªôt trang m·ªõi. H√£y t√¨m v√† nh·∫•n v√†o d√≤ng ch·ªØ **"creating a new file"**.
    * **ƒê·∫∑t t√™n file:** ·ªû √¥ ƒë·∫∑t t√™n, g√µ ch√≠nh x√°c `index.html`
    * **L·∫•y m√£ ngu·ªìn:** M·ªü t√†i li·ªáu c√≥ t√™n **`Sakura Quest - M√£ ngu·ªìn HTML cu·ªëi c√πng (ƒê√£ n·∫°p 100 c·ªôt m·ªëc)`**. Sao ch√©p **TO√ÄN B·ªò** m√£ ngu·ªìn trong ƒë√≥.
    * **D√°n m√£ ngu·ªìn:** Quay l·∫°i trang GitHub v√† d√°n to√†n b·ªô m√£ ngu·ªìn v√†o khung so·∫°n th·∫£o l·ªõn.
    * **L∆∞u l·∫°i:** Cu·ªôn xu·ªëng d∆∞·ªõi c√πng v√† nh·∫•n n√∫t m√†u xanh l√° **"Commit new file"**.

    **T√¨nh tr·∫°ng:** ƒê√£ ho√†n th√†nh vi·ªác c·∫•t gi·ªØ b·∫£n thi·∫øt k·∫ø m·ªõi nh·∫•t.

---

### B∆∞·ªõc 2: "S·∫£n xu·∫•t" v√† "L√°i th·ª≠" (Tri·ªÉn khai v·ªõi Vercel)

**T√≥m t·∫Øt:** D√πng "nh√† m√°y t·ª± ƒë·ªông" Vercel ƒë·ªÉ ƒë·ªçc b·∫£n thi·∫øt k·∫ø t·ª´ GitHub v√† s·∫£n xu·∫•t ra trang web.

* **2.1: T·∫°o t√†i kho·∫£n Vercel (N·∫øu ch∆∞a c√≥)**
    * Truy c·∫≠p [https://vercel.com](https://vercel.com).
    * Nh·∫•n **"Sign Up"** v√† ch·ªçn n√∫t **"Continue with GitHub"** m√†u ƒëen ƒë·ªÉ k·∫øt n·ªëi hai t√†i kho·∫£n.

* **2.2: Nh·∫≠p "B·∫£n thi·∫øt k·∫ø" v√†o "Nh√† m√°y"**
    * Sau khi ƒëƒÉng nh·∫≠p, nh·∫•n v√†o n√∫t m√†u ƒëen **"Add New..."** v√† ch·ªçn **"Project"**.
    * T√¨m ƒë·∫øn d·ª± √°n `sakura-quest-final` v√† nh·∫•n n√∫t **"Import"** b√™n c·∫°nh.
    * **N·∫øu kh√¥ng th·∫•y d·ª± √°n:**
        * Nh·∫•n v√†o menu th·∫£ xu·ªëng b√™n c·∫°nh t√™n t√†i kho·∫£n GitHub c·ªßa s·∫øp, ch·ªçn **"Adjust GitHub App Permissions"**.
        * M·ªôt c·ª≠a s·ªï c·ªßa GitHub s·∫Ω m·ªü ra. Ch·ªçn **"Only select repositories"**, t√¨m v√† tick v√†o `sakura-quest-final`.
        * Nh·∫•n **"Save"**. Quay l·∫°i Vercel v√† d·ª± √°n s·∫Ω xu·∫•t hi·ªán.

* **2.3: B·∫Øt ƒë·∫ßu "S·∫£n xu·∫•t"**
    * S·∫øp s·∫Ω ·ªü trang **"Configure Project"**.
    * V√¨ ch√∫ng ta d√πng file `index.html` ƒë∆°n gi·∫£n, Vercel s·∫Ω nh·∫≠n di·ªán ƒë√∫ng. S·∫øp **kh√¥ng c·∫ßn thay ƒë·ªïi b·∫•t k·ª≥ c√†i ƒë·∫∑t n√†o**.
    * Ch·ªâ c·∫ßn cu·ªôn xu·ªëng v√† nh·∫•n n√∫t **"Deploy"** m√†u ƒëen. L·∫ßn n√†y s·∫Ω kh√¥ng c√≥ l·ªói.

* **2.4: Nh·∫≠n "Xe" v√† "L√°i th·ª≠"!**
    * Qu√° tr√¨nh s·∫£n xu·∫•t m·∫•t kho·∫£ng 1 ph√∫t. Khi ho√†n t·∫•t, m√†n h√¨nh s·∫Ω hi·ªÉn th·ªã l·ªùi ch√∫c m·ª´ng (Congratulations!).
    * Nh·∫•n v√†o h√¨nh ·∫£nh c·ªßa ·ª©ng d·ª•ng Sakura Quest.

**K·∫æT QU·∫¢ CU·ªêI C√ôNG:**

M·ªôt tab m·ªõi tr√™n tr√¨nh duy·ªát s·∫Ω m·ªü ra v√† ·ª©ng d·ª•ng Sakura Quest s·∫Ω ch·∫°y tr√™n ƒë√≥! ƒê∆∞·ªùng link n√†y ch√≠nh l√† th√†nh qu·∫£ c·ªßa ch√∫ng 
